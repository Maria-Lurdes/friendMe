{"ast":null,"code":"import { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/post.service\";\nimport * as i2 from \"../../shared/services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/paginator\";\nimport * as i5 from \"@angular/material/progress-bar\";\nimport * as i6 from \"../pet-card/pet-card.component\";\nimport * as i7 from \"../../shared/filter.pipe\";\nconst _c0 = [\"paginator\"];\n\nfunction PetsListComponent_div_21_app_pet_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-pet-card\", 17);\n  }\n\n  if (rf & 2) {\n    const post_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"favouritesList\", ctx_r5.favouritesList)(\"petPost\", post_r6)(\"userId\", ctx_r5.userId);\n  }\n}\n\nfunction PetsListComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PetsListComponent_div_21_app_pet_card_1_Template, 1, 3, \"app-pet-card\", 16);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵpipe(3, \"filterType\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(2, 1, i0.ɵɵpipeBind2(3, 5, ctx_r0.posts, ctx_r0.filterPetByType), ctx_r0.lowValue, ctx_r0.highValue));\n  }\n}\n\nfunction PetsListComponent_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 4);\n    i0.ɵɵtext(1, \" There is no pet \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PetsListComponent_ng_template_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 18);\n  }\n}\n\nexport let PetsListComponent = /*#__PURE__*/(() => {\n  class PetsListComponent {\n    constructor(postService, authService) {\n      this.postService = postService;\n      this.authService = authService;\n      this.posts = [];\n      this.filterPetByType = \"all\";\n      this.userId = \"\";\n      this.auth = getAuth();\n      this.favouritesList = [];\n      this.pageIndex = 0;\n      this.pageSize = 12;\n      this.lowValue = 0;\n      this.highValue = 12;\n      this.loader = true;\n    }\n\n    ngOnInit() {\n      this.getChosenPets();\n      this.getAllPets();\n      this.getCurrentPosts();\n      this.getUserId();\n      this.getFavouritePetsList();\n    }\n\n    getFavouritePetsList() {\n      this.authService.favouritesPetsList.subscribe(list => {\n        this.favouritesList = list;\n      });\n    }\n\n    getUserId() {\n      onAuthStateChanged(this.auth, user => {\n        if (user) {\n          this.userId = user.uid;\n        }\n      });\n    }\n\n    getChosenPets() {\n      this.authService.getFavourites();\n    }\n\n    getCurrentPosts() {\n      this.postService.petPostsArray.subscribe(currentPosts => {\n        this.posts = this.getPostsByColor(currentPosts);\n        this.loader = false;\n      }, () => {\n        this.loader = false;\n      });\n    }\n\n    getAllPets() {\n      this.postService.getAll();\n    }\n\n    getPostsByColor(posts) {\n      let updatedPosts = [];\n      posts.forEach((item, index) => {\n        let postItem = Object.assign({}, item);\n\n        if (index === 0) {\n          postItem = Object.assign(Object.assign({}, postItem), {\n            color: \"green\"\n          });\n        } else {\n          if (updatedPosts[updatedPosts.length - 1].color === \"green\") {\n            postItem = Object.assign(Object.assign({}, postItem), {\n              color: \"orange\"\n            });\n          } else if (updatedPosts[updatedPosts.length - 1].color === \"orange\") {\n            postItem = Object.assign(Object.assign({}, postItem), {\n              color: \"blue\"\n            });\n          } else if (updatedPosts[updatedPosts.length - 1].color === \"blue\") {\n            postItem = Object.assign(Object.assign({}, postItem), {\n              color: \"green\"\n            });\n          }\n        }\n\n        updatedPosts.push(postItem);\n      });\n      return updatedPosts;\n    }\n\n    getPaginatorData(event) {\n      if (event.pageIndex === this.pageIndex + 1) {\n        this.lowValue = this.lowValue + this.pageSize;\n        this.highValue = this.highValue + this.pageSize;\n      } else if (event.pageIndex === this.pageIndex - 1 && this.lowValue > 0) {\n        this.lowValue = this.lowValue - this.pageSize;\n        this.highValue = this.highValue - this.pageSize;\n      }\n\n      this.pageIndex = event.pageIndex;\n    }\n\n    handleFilterAndPagination(type) {\n      var _a;\n\n      this.lowValue = 0;\n      this.highValue = 12;\n      (_a = this.paginator) === null || _a === void 0 ? void 0 : _a.firstPage();\n      this.filterPetByType = type;\n    }\n\n  }\n\n  PetsListComponent.ɵfac = function PetsListComponent_Factory(t) {\n    return new (t || PetsListComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.AuthService));\n  };\n\n  PetsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PetsListComponent,\n    selectors: [[\"app-pets-list\"]],\n    viewQuery: function PetsListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      }\n    },\n    decls: 30,\n    vars: 18,\n    consts: [[1, \"white-container\"], [1, \"page-wrapper\"], [\"id\", \"pets-list\", 1, \"list-container\"], [1, \"categories-block\"], [1, \"title-categories\"], [1, \"view-all\", 3, \"click\"], [1, \"btn-yellow\"], [\"alt\", \"\", \"src\", \"../../../assets/images/arrow-white.png\"], [1, \"pets-types-block\"], [3, \"className\", \"click\"], [\"class\", \"pets-wrapper\", 4, \"ngIf\", \"ngIfElse\"], [\"class\", \"title-categories\", 4, \"ngIf\"], [3, \"length\", \"pageSize\", \"page\"], [\"paginator\", \"\"], [\"loading\", \"\"], [1, \"pets-wrapper\"], [3, \"favouritesList\", \"petPost\", \"userId\", 4, \"ngFor\", \"ngForOf\"], [3, \"favouritesList\", \"petPost\", \"userId\"], [\"mode\", \"indeterminate\"]],\n    template: function PetsListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"p\", 4);\n        i0.ɵɵtext(5, \" Categories \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵlistener(\"click\", function PetsListComponent_Template_div_click_6_listener() {\n          return ctx.handleFilterAndPagination(\"all\");\n        });\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵtext(8, \"View All\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelement(10, \"img\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9);\n        i0.ɵɵlistener(\"click\", function PetsListComponent_Template_div_click_12_listener() {\n          return ctx.handleFilterAndPagination(\"cat\");\n        });\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14, \"Cats\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 9);\n        i0.ɵɵlistener(\"click\", function PetsListComponent_Template_div_click_15_listener() {\n          return ctx.handleFilterAndPagination(\"dog\");\n        });\n        i0.ɵɵelementStart(16, \"p\");\n        i0.ɵɵtext(17, \"Dogs\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 9);\n        i0.ɵɵlistener(\"click\", function PetsListComponent_Template_div_click_18_listener() {\n          return ctx.handleFilterAndPagination(\"horse\");\n        });\n        i0.ɵɵelementStart(19, \"p\");\n        i0.ɵɵtext(20, \"Horses\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(21, PetsListComponent_div_21_Template, 4, 8, \"div\", 10);\n        i0.ɵɵtemplate(22, PetsListComponent_p_22_Template, 2, 0, \"p\", 11);\n        i0.ɵɵpipe(23, \"slice\");\n        i0.ɵɵpipe(24, \"filterType\");\n        i0.ɵɵelementStart(25, \"mat-paginator\", 12, 13);\n        i0.ɵɵlistener(\"page\", function PetsListComponent_Template_mat_paginator_page_25_listener($event) {\n          return ctx.getPaginatorData($event);\n        });\n        i0.ɵɵpipe(27, \"filterType\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(28, PetsListComponent_ng_template_28_Template, 1, 0, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(29);\n\n        let tmp_5_0;\n        let tmp_6_0;\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"className\", ctx.filterPetByType === \"cat\" ? \"active type\" : \"type\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"className\", ctx.filterPetByType === \"dog\" ? \"active type\" : \"type\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"className\", ctx.filterPetByType === \"horse\" ? \"active type\" : \"type\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loader)(\"ngIfElse\", _r3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loader && !((tmp_5_0 = i0.ɵɵpipeBind3(23, 8, i0.ɵɵpipeBind2(24, 12, ctx.posts, ctx.filterPetByType), ctx.lowValue, ctx.highValue)) == null ? null : tmp_5_0.length));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"length\", (tmp_6_0 = i0.ɵɵpipeBind2(27, 15, ctx.posts, ctx.filterPetByType)) == null ? null : tmp_6_0.length)(\"pageSize\", ctx.pageSize);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.MatPaginator, i5.MatProgressBar, i6.PetCardComponent, i3.SlicePipe, i7.FilterPipe],\n    styles: [\".page-wrapper[_ngcontent-%COMP%]{width:98%;max-width:1440px;min-width:300px;height:100%;margin:auto}.mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:20px}.white-container[_ngcontent-%COMP%]{width:100%;height:100%;background:white;position:relative}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{padding-top:60px}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;margin-top:25px;margin-bottom:50px}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{width:60px;height:60px;background:#f7f7f8;border-radius:15.6645px;display:flex;justify-content:center;align-items:center;margin-right:16px;cursor:pointer}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]   .type.active[_ngcontent-%COMP%]{background:linear-gradient(180deg,#64adef 0%,#3198f4 100%);box-shadow:0 9.39868px 22.9745px #0000000f,0 4.86042px 9.5093px #00000009,0 3.41853px 5.70127px #00000006,0 2.18408px 2.93018px #00000004}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]   .type.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:20px;text-align:center;color:#03063a;margin:0}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .view-all[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;cursor:pointer}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .view-all[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#fdd153;margin:0 10px 0 20px}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .view-all[_ngcontent-%COMP%]   .btn-yellow[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fdd153 0%,#f5c02d 100%);border-radius:4.17719px;width:20px;height:18px}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .title-categories[_ngcontent-%COMP%]{color:#03063a;font-size:18px;font-weight:700;margin:0}.white-container[_ngcontent-%COMP%]   .pets-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap}@media (max-width: 768px){.white-container[_ngcontent-%COMP%]   .pets-wrapper[_ngcontent-%COMP%]{justify-content:space-evenly}.white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%], .white-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .categories-block[_ngcontent-%COMP%]   .pets-types-block[_ngcontent-%COMP%]{justify-content:center}}\"]\n  });\n  return PetsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}